ğŸ’¿ Database: MusicLib
use MusicLib

Sample Data (if not already inserted)
db.libraryinfo.insertMany([
  { _id: 1, name: "Rafi", album: "Golden Hits", type: "classic", company: "Saregama", price: 500 },
  { _id: 2, name: "Sonu Nigam", album: "Melody Beats", type: "pop", company: "T-Series", price: 300 },
  { _id: 3, name: "Shreya Ghoshal", album: "Love Tunes", type: "romantic", company: "Sony Music", price: 400 },
  { _id: 4, name: "Asha Bhosle", album: "Old is Gold", type: "classic", company: "Universal", price: 350 },
  { _id: 5, name: "Arijit Singh", album: "Heart Songs", type: "pop", company: "T-Series", price: 600 }
])

âš™ï¸ Indexing and Aggregation Implementation
1ï¸âƒ£ Find name from collection and use explain() with it

ğŸ‘‰ explain() shows how MongoDB will execute the query (with or without index).

db.libraryinfo.find({ name: "Rafi" }).explain("executionStats")

2ï¸âƒ£ Create an index on album name

ğŸ‘‰ Improves search performance for album-based queries.

db.libraryinfo.createIndex({ album: 1 })

3ï¸âƒ£ Search name xyz with explain

ğŸ‘‰ Shows how the query runs even if no result is found.

db.libraryinfo.find({ name: "xyz" }).explain("executionStats")

4ï¸âƒ£ Create index on company name
db.libraryinfo.createIndex({ company: 1 })

5ï¸âƒ£ List all system indexes

ğŸ‘‰ Shows all indexes present on the collection.

db.libraryinfo.getIndexes()

6ï¸âƒ£ Drop index on company name

ğŸ‘‰ Removes the created index.

db.libraryinfo.dropIndex({ company: 1 })

ğŸ§® Aggregation Operations
7ï¸âƒ£ Aggregation â€” Sort album collection by album name

ğŸ‘‰ Sorts alphabetically using $sort.

db.libraryinfo.aggregate([
  { $sort: { album: 1 } }
])

8ï¸âƒ£ Aggregation â€” Match particular album, group by company, and show total price

ğŸ‘‰ Filters an album and groups company with total cost.

db.libraryinfo.aggregate([
  { $match: { album: "Heart Songs" } },
  { $group: { _id: "$company", totalPrice: { $sum: "$price" } } }
])

9ï¸âƒ£ Find album having minimum and maximum price

ğŸ‘‰ Uses $group and $min, $max.

db.libraryinfo.aggregate([
  {
    $group: {
      _id: null,
      MinPrice: { $min: "$price" },
      MaxPrice: { $max: "$price" }
    }
  }
])

ğŸ”Ÿ Find album from company = â€œT-Seriesâ€ with type = â€œclassicâ€

ğŸ‘‰ Uses $and operator inside find() or $match in aggregation.

db.libraryinfo.find({
  $and: [{ company: "T-Series" }, { type: "classic" }]
})


(If you prefer aggregation:)

db.libraryinfo.aggregate([
  { $match: { company: "T-Series", type: "classic" } }
])

11ï¸âƒ£ Project only 2 keys (fields) from collection

ğŸ‘‰ Shows only name and album fields.

db.libraryinfo.find({}, { name: 1, album: 1, _id: 0 })