INPUT --

import java.util.*;

public class OptimalPageReplacement
{
    public static void main(String[] args)
    {
        Scanner sc = new Scanner(System.in);

        System.out.print("Enter number of frames: ");
        int framesCount = sc.nextInt();

        System.out.print("Enter number of pages: ");
        int pagesCount = sc.nextInt();

        int[] pages = new int[pagesCount];
        System.out.println("Enter the reference string (page numbers):");
        for (int i = 0; i < pagesCount; i++)
        {
            pages[i] = sc.nextInt();
        }

        ArrayList<Integer> frames = new ArrayList<>(framesCount);
        int pageFaults = 0;

        System.out.println("\nPage\tFrames");
        System.out.println("--------------------");

        for (int i = 0; i < pagesCount; i++)
        {
            int page = pages[i];

            // If page is not already in memory
            if (!frames.contains(page))
            {
                // If memory has space, simply add page
                if (frames.size() < framesCount)
                {
                    frames.add(page);
                }
                else
                {
                    // Find the page to replace using Optimal strategy
                    int indexToReplace = predict(frames, pages, i + 1);
                    frames.set(indexToReplace, page);
                }

                pageFaults++;
            }

            // Print current frame contents
            System.out.print(page + "\t");
            printFrames(frames, framesCount);
        }

        System.out.println("\nTotal Page Faults: " + pageFaults);
    }

    // Function to predict which page to replace
    static int predict(ArrayList<Integer> frames, int[] pages, int currentIndex)
    {
        int farthest = currentIndex, indexToReplace = -1;

        for (int i = 0; i < frames.size(); i++)
        {
            int j;
            for (j = currentIndex; j < pages.length; j++)
            {
                if (frames.get(i) == pages[j])
                {
                    if (j > farthest)
                    {
                        farthest = j;
                        indexToReplace = i;
                    }
                    break;
                }
            }

            // If a page is never referenced again, replace it immediately
            if (j == pages.length)
                return i;
        }

        // If all pages are referenced again, replace the farthest one
        return (indexToReplace == -1) ? 0 : indexToReplace;
    }

    // Helper method to print frames
    static void printFrames(ArrayList<Integer> frames, int frameCount)
    {
        for (int i = 0; i < frameCount; i++)
        {
            if (i < frames.size())
                System.out.print(frames.get(i) + " ");
            else
                System.out.print("- ");
        }
        System.out.println();
    }
}

OUTPUT --

Enter number of frames: 3
Enter number of pages: 12
Enter the reference string (page numbers):
7 0 1 2 0 3 0 4 2 3 0 3

Page    Frames
--------------------
7       7 - -
0       7 0 -
1       7 0 1
2       2 0 1
0       2 0 1
3       2 0 3
0       2 0 3
4       2 4 3
2       2 4 3
3       2 4 3
0       0 4 3
3       0 4 3

Total Page Faults: 7

Program finished execution.
Press any key to continue . . .